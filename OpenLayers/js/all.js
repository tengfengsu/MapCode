OpenLayers.Layer.QQMap=OpenLayers.Class(OpenLayers.Layer.TileCache,{sateTiles:false,imgdirname:"maptilesv3",online:true,initialize:function(name,url,options){var tempoptions=OpenLayers.Util.extend({"format":"image/png",isBaseLayer:true},options);OpenLayers.Layer.TileCache.prototype.initialize.apply(this,[name,url,{},tempoptions]);this.extension=this.format.split("/")[1].toLowerCase();this.extension=(this.extension=="jpg")?"jpeg":this.extension;this.transitionEffect="resize";this.buffer=0},getURL:function(bounds){var res=this.map.getResolution();var bbox=this.map.getMaxExtent();var size=this.tileSize;var tileZ=this.map.zoom;var tileX=Math.round((bounds.left-bbox.left)/(res*size.w));var tileY=Math.round((bbox.top-bounds.top)/(res*size.h));var scope=new Array(0,0,0,0,0,3,0,3,0,3,0,3,0,7,0,7,0,15,0,15,0,31,0,31,0,63,4,59,0,127,12,115,0,225,28,227,356,455,150,259,720,899,320,469,1440,1799,650,929,2880,3589,1200,2069,5760,7179,2550,3709,11520,14349,5100,7999,23060,28689,10710,15429,46120,57369,20290,29849,89990,124729,41430,60689,184228,229827,84169,128886);var f=tileZ*4;var i=scope[f++];var j=scope[f++];var l=scope[f++];var scope=scope[f];var tileNo=null;var imgformat=this.sateTiles?".jpg":".png";tileNo=tileZ+"/"+Math.floor(tileX/16)+"/"+Math.floor(tileY/16)+"/"+tileX+"_"+tileY+imgformat;if(tileX>=i&&tileX<=j&&tileY>=l&&tileY<=scope){tileY=Math.pow(2,tileZ)-1-tileY;tileNo=tileZ+"/"+Math.floor(tileX/16)+"/"+Math.floor(tileY/16)+"/"+tileX+"_"+tileY+imgformat}var Surl=this.url;if(OpenLayers.Util.isArray(Surl)){Surl=this.selectUrl(tileNo,Surl)}if(this.online){return Surl+"/"+tileNo}else{return Surl+this.imgdirname+"/"+tileNo}},clone:function(obj){if(obj==null){obj=new OpenLayers.Layer.QQMap(this.name,this.url,this.options)}obj=OpenLayers.Layer.TileCache.prototype.clone.apply(this,[obj]);return obj},CLASS_NAME:"OpenLayers.Layer.QQMap"});
OpenLayers.Layer.QQ=OpenLayers.Class(OpenLayers.Layer.TileCache,{sateTiles:!1,imgdirname:"mapTiles",online:true,initialize:function(a,b,c){var d=OpenLayers.Util.extend({format:"image/png",isBaseLayer:!0},c);OpenLayers.Layer.TileCache.prototype.initialize.apply(this,[a,b,{},d]),this.extension=this.format.split("/")[1].toLowerCase(),this.extension="jpg"==this.extension?"jpeg":this.extension,this.transitionEffect="resize",this.buffer=0},getURL:function(a){var b=this.map.getResolution(),c=this.map.getMaxExtent(),d=this.tileSize,e=this.map.zoom,f=Math.round((a.left-c.left)/(b*d.w)),g=Math.round((c.top-a.top)/(b*d.h)),h=new Array(0,0,0,0,0,3,0,3,0,3,0,3,0,7,0,7,0,15,0,15,0,31,0,31,0,63,4,59,0,127,12,115,0,225,28,227,356,455,150,259,720,899,320,469,1440,1799,650,929,2880,3589,1200,2069,5760,7179,2550,3709,11520,14349,5100,7999,23060,28689,10710,15429,46120,57369,20290,29849,89990,124729,41430,60689,184228,229827,84169,128886),i=4*e,j=h[i++],k=h[i++],l=h[i++],h=h[i],m=this.imgdirname=="sateTiles"?".jpg":".png";if(f>=j&&k>=f&&g>=l&&h>=g){g=Math.pow(2,e)-1-g;var n="";if(this.online){if(this.imgdirname=="sateTiles"){n=e+"/"+Math.floor(f/16)+"/"+Math.floor(g/16)+"/"+f+"_"+g+m}else{if(this.imgdirname=="demTiles"){n=e+"/"+Math.floor(f/16)+"/"+Math.floor(g/16)+"/"+f+"_"+g+m}else{n="&z="+e+"&x="+f+"&y="+g}}}else{n=this.imgdirname+"/"+e+"/"+Math.floor(f/16)+"/"+Math.floor(g/16)+"/"+f+"_"+g+m}}var o=this.url;return OpenLayers.Util.isArray(o)&&n&&(o=this.selectUrl(n,o)),o+n},clone:function(a){return null==a&&(a=new OpenLayers.Layer.QQ(this.name,this.url,this.options)),a=OpenLayers.Layer.TileCache.prototype.clone.apply(this,[a])},CLASS_NAME:"OpenLayers.Layer.QQ"});
OpenLayers.Layer.Baidu=OpenLayers.Class(OpenLayers.Layer.TileCache,{imgdirname:"onlinelabel",sateTiles:false,online:true,initialize:function(name,url,options){var tempoptions=OpenLayers.Util.extend({"format":"image/png",isBaseLayer:true},options);OpenLayers.Layer.TileCache.prototype.initialize.apply(this,[name,url,{},tempoptions]);this.extension=this.format.split("/")[1].toLowerCase();this.extension=(this.extension=="jpg")?"jpeg":this.extension;this.transitionEffect="resize";this.buffer=0},getURL:function(bounds){var tilez=this.map.zoom-1;var res=this.map.getResolution();var bbox=this.map.getMaxExtent();var size=this.tileSize;var bx=Math.round((bounds.left-this.tileOrigin.lon)/(res*size.w));var by=Math.round((bounds.bottom-this.tileOrigin.lat)/(res*size.h));tilez=tilez+1;var x=bx.toString().replace("-","M");var y=by.toString().replace("-","M");var urlsNum=parseInt(Math.abs(bx+by)%this.url.length);var strURL="";if(this.online){if(this.imgdirname=="sateTiles"){strURL=this.url[urlsNum]+"x="+x+";y="+y+";z="+tilez+";v=009;type=sate&fm=46"}else{strURL=this.url[urlsNum]+"&x="+x+"&y="+y+"&z="+tilez}}else{m=this.imgdirname=="sateTiles"?".jpg":".png";strURL=this.url+this.imgdirname+"/"+tilez+"/"+Math.floor(x/16)+"/"+Math.floor(y/16)+"/"+x+"_"+y+m}return strURL},clone:function(obj){if(obj==null){obj=new OpenLayers.Layer.Baidu(this.name,this.url,this.options)}obj=OpenLayers.Layer.TileCache.prototype.clone.apply(this,[obj]);return obj},CLASS_NAME:"OpenLayers.Layer.Baidu"});
OpenLayers.Layer.GaoDe=OpenLayers.Class(OpenLayers.Layer.TileCache,{sateTiles:false,imgdirname:"maptiles",realtimeurl:"",imgtype:1,online:true,initialize:function(name,url,options){var tempoptions=OpenLayers.Util.extend({"format":"image/png",isBaseLayer:true},options);OpenLayers.Layer.TileCache.prototype.initialize.apply(this,[name,url,{},tempoptions]);this.extension=this.format.split("/")[1].toLowerCase();this.extension=(this.extension=="jpg")?"jpeg":this.extension;this.transitionEffect="resize";this.buffer=0;this.realtimeurl=url},getURL:function(bounds){var res=this.map.getResolution();var bbox=this.map.getMaxExtent();var size=this.tileSize;var tileX=Math.round((bounds.left-bbox.left)/(res*size.w));var tileY=Math.round((bbox.top-bounds.top)/(res*size.h));var tileZ=this.map.zoom;if(tileX<0){tileX=tileX+Math.round(bbox.getWidth()/bounds.getWidth())}if(tileY<0){tileY=tileY+Math.round(bbox.getHeight()/bounds.getHeight())}var urlsNum=parseInt(Math.abs(tileX+tileY)%this.realtimeurl.length);if(this.online){return this.realtimeurl[urlsNum]+"&x="+tileX+"&y="+tileY+"&z="+this.map.zoom}else{m=this.imgdirname=="sateTiles"?".jpg":".png";return this.realtimeurl+this.imgdirname+"/"+this.map.zoom+"/"+Math.floor(tileX/16)+"/"+Math.floor(tileY/16)+"/"+tileX+"_"+tileY+m}},clone:function(obj){if(obj==null){obj=new OpenLayers.Layer.GaoDe(this.name,this.url,this.options)}obj=OpenLayers.Layer.TileCache.prototype.clone.apply(this,[obj]);return obj},CLASS_NAME:"OpenLayers.Layer.GaoDe"});
